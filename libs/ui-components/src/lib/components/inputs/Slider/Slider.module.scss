@use '../../../styles/mixins/component' as *;
@use '../../../styles/mixins/spacing' as *;

.container {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  width: 100%;
}

.label {
  font-size: var(--font-size-base);
  font-weight: 500;
  color: var(--theme-text-primary);
}

.sliderWrapper {
  padding: var(--spacing-md) 0;

  &[data-orientation='vertical'] {
    height: 200px;
    width: fit-content;
    padding: 0 var(--spacing-md);
  }
}

.slider {
  --slider-track-height: 4px;
  --slider-thumb-size: 20px;
  --slider-track-color: var(--theme-control-border);
  --slider-track-filled-color: var(--theme-primary);
  --slider-thumb-color: var(--theme-white);
  --slider-thumb-border: var(--theme-primary);

  position: relative;
  width: 100%;
  height: var(--slider-thumb-size);

  &[data-orientation='vertical'] {
    width: var(--slider-thumb-size);
    height: 100%;
  }

  &[data-size='sm'] {
    --slider-track-height: 2px;
    --slider-thumb-size: 16px;
  }

  &[data-size='lg'] {
    --slider-track-height: 6px;
    --slider-thumb-size: 24px;
  }

  &[data-variant='primary'] {
    --slider-track-filled-color: var(--theme-primary-500);
    --slider-thumb-border: var(--theme-primary-500);
  }

  &[data-variant='secondary'] {
    --slider-track-filled-color: var(--theme-secondary-500);
    --slider-thumb-border: var(--theme-secondary-500);
  }

  &[data-variant='success'] {
    --slider-track-filled-color: var(--theme-success-500);
    --slider-thumb-border: var(--theme-success-500);
  }

  &[data-variant='warning'] {
    --slider-track-filled-color: var(--theme-warning-500);
    --slider-thumb-border: var(--theme-warning-500);
  }

  &[data-variant='danger'] {
    --slider-track-filled-color: var(--theme-error);
    --slider-thumb-border: var(--theme-error);
  }

  &[data-error='true'] {
    --slider-track-filled-color: var(--theme-error);
    --slider-thumb-border: var(--theme-error);
  }
}

.track {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 100%;
  height: var(--slider-track-height);
  background-color: var(--slider-track-color);
  border-radius: calc(var(--slider-track-height) / 2);

  .slider[data-orientation='vertical'] & {
    left: 50%;
    top: 0;
    transform: translateX(-50%);
    width: var(--slider-track-height);
    height: 100%;
  }
}

.trackFilled {
  position: absolute;
  height: 100%;
  background-color: var(--slider-track-filled-color);
  border-radius: inherit;
}

.input {
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0;
  cursor: pointer;
  z-index: 2;

  &:disabled {
    cursor: not-allowed;
  }

  .slider[data-orientation='vertical'] & {
    writing-mode: bt-lr;
    appearance: slider-vertical;
  }
}

.thumb {
  position: absolute;
  top: 50%;
  transform: translate(-50%, -50%);
  width: var(--slider-thumb-size);
  height: var(--slider-thumb-size);
  background-color: var(--slider-thumb-color);
  border: 2px solid var(--slider-thumb-border);
  border-radius: 50%;
  box-shadow: 0 2px 4px rgb(0 0 0 / 20%);
  pointer-events: auto;
  cursor: pointer;
  transition: transform 0.1s ease;
  z-index: 1;

  .slider[data-orientation='vertical'] & {
    left: 50%;
    top: auto;
    transform: translate(-50%, 50%);
  }
}

.thumbHovered {
  transform: translate(-50%, -50%) scale(1.1);

  .slider[data-orientation='vertical'] & {
    transform: translate(-50%, 50%) scale(1.1);
  }
}

.thumbActive {
  transform: translate(-50%, -50%) scale(1.2);

  .slider[data-orientation='vertical'] & {
    transform: translate(-50%, 50%) scale(1.2);
  }
}

.valueLabel {
  position: absolute;
  bottom: calc(100% + 8px);
  left: 50%;
  transform: translateX(-50%);
  padding: 4px 8px;
  background-color: var(--theme-background-primary);
  color: var(--theme-text-primary);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-sm);
  white-space: nowrap;
  pointer-events: none;

  &::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 4px solid transparent;
    border-top-color: var(--theme-background-primary);
  }

  .slider[data-orientation='vertical'] & {
    bottom: auto;
    left: calc(100% + 8px);
    top: 50%;
    transform: translateY(-50%);

    &::after {
      top: 50%;
      left: auto;
      right: 100%;
      transform: translateY(-50%);
      border-top-color: transparent;
      border-right-color: var(--theme-background-primary);
    }
  }
}

.mark {
  position: absolute;
  top: 50%;
  transform: translateX(-50%);

  .slider[data-orientation='vertical'] & {
    left: 50%;
    top: auto;
    transform: translateY(50%);
  }
}

.markDot {
  width: 8px;
  height: 8px;
  background-color: var(--theme-neutral-400);
  border-radius: 50%;
  transform: translate(-50%, -50%);

  .slider[data-orientation='vertical'] & {
    transform: translate(-50%, 50%);
  }
}

.markLabel {
  position: absolute;
  top: 12px;
  left: 50%;
  transform: translateX(-50%);
  font-size: var(--font-size-sm);
  color: var(--theme-text-secondary);
  white-space: nowrap;

  .slider[data-orientation='vertical'] & {
    top: 50%;
    left: 24px;
    transform: translateY(-50%);
  }
}

.helperText {
  font-size: var(--font-size-sm);
  color: var(--theme-text-secondary);

  &[data-error='true'] {
    color: var(--theme-error);
  }
}
